# 25261-000003-W0000.开学大礼包02-双编译器-1<br/>用VS2022 编译C++程序

## 本文档内容
- 注意事项
- 新建项目并新建解决方案（共13步+文件及文件夹关系说明）
- 在一个已有解决方案中新建项目（共13步+文件及文件夹关系说明）

## §.注意事项
### **认真阅读!!!**
### 【基本知识】
- 项目：完成一个特定功能的所有源程序组成一个项目（简单来说，一道作业题一个项目）
  - 源程序文件：完成程序特定功能的代码，一个项目允许有多个源程序文件（最开始几周，一个项目一个源程序文件）
  - 头文件：代码中有特殊用途一种，具体在第4章会接触到
- 解决方案：VS2022提供的，可同时管理多个项目的集成环境（有效使用解决方案，能极大提高效率）

### 【基本步骤】
1、创建新项目（第一次创建新项目会同步建立一个解决方案）
2、在项目中建立新的源程序文件 **(\*.cpp/\*.c)**
3、对源程序文件 **(\*.cpp)** 进行编译，检查语法错误，错误分 **致命错误(error)** 及 **警告错误(warning)** ，生成编译结果文件 **(\*.obj)**
- warning只在源程序改动后的 **第一次编译时出现，之后不再出现**
- VS2022下warning有两种：常规warning及智能提示warning，只需要解决常规warning即可，具体识别及处理 **另行下发文档**

4、对编译结果文件 **(\*.obj)** 进行链接，检查链接过程中的错误，形成可执行程序文件 **(\*.exe)**
5、运行可执行程序文件 **(\*.exe)** ，检查其中的逻辑错误，验证程序正确性
- 编译执行过程中会产生很多临时文件 **(交作业时只有\*.c/\*.cpp是需要的)**

### 【本课程作业的格式要求】
- 文档另行下发，仅是初步要求，随着内容深入会逐步提出新要求

## §.使用VS2022编写调试一个新程序的基本步骤 - 新建项目并新建解决方案
### 第1步：启动VS2022
#### 方法1：选择"创建新项目"
![](startup_0201.png)
#### 方法2：选择"继续但无需代码"后进入主界面，按"新建项目"按钮 **(直接按"Ctrl+Shift+N"也可)**
![](startup_0202.png)
#### 方法3：选择"继续但无需代码"后进入主界面， 菜单-"文件"-"新建"-"项目" **(直接按"Ctrl+Shift+N"也可)**
![](startup_0203.png)

### 第2步：出现的对话框中，选择"空项目"，按"下一步" **（不要瞎选）**
![](startup_0204.png)

### 第3步：出现的对话框中，"项目名称"、"位置"、"解决方案名称"等按需修改，最后按"创建"
![](startup_0205.png)

### 第4步：项目/解决方法新建成功后，出现如下界面 **（一定要改为Debug/x86）**
![](startup_0206.png)
*注：因为上一步设置的"项目名"和"解决方案名"不同，界面上显示不同，请注意观察*

### 第5步：在项目"helloworld"的"源文件"上按鼠标右键，出现的菜单中选择"添加"-"新建项"
![](startup_0207.png)

### 第6步：在出现的"添加新项"对话框（简版）中选择"显示所有模版"（课程后期需添加其他类型文件，因此进行设置）
![](startup_0208.png)

### 第7步：出现的对话框中选择"C++文件(.cpp)"，在"名称"中输入C++源文件的名称 **(按作业要求命名)**，按"添加"
![](startup_0209.png)

### 第8步：在新添加的源程序文件中输入你的代码
![](startup_0210.png)

### 第9步：确认右下角两个设置是否"SYS-简体中文(GB2312)"和"CRLF" **（非常重要，设置错误会导致丢分）**
![](startup_0211.png)

### 第10步：输入完成后，"调试"-"开始执行(不调试)"  **(推荐直接按 CTRL+F5 组合键)**
![](startup_0212.png)

### 第11步：如果程序正确，则会执行并显示运行结果
![](startup_0213.png)
注：有基础的同学，可能知道在源程序最后加 system("pause"); / getchar(); 之类的语句来暂停<br/>
**特别声明，在作业中 *不允许* 使用这些方法** ，否则该题得分以0分计算

### 第12步：如果源程序有错误，则出现的对话框选择"否"，再根据编译时产生的错误提示信息修改源程序，再选择"调试"-"开始执行(不调试)" **(第10步)** ，反复多次直至程序正确运行为止
![](startup_0214.png)

### 第13步：一个程序完成后，"文件"-"关闭解决方案"，或右上角 x 关闭
![](startup_0215.png)

### 文件及文件夹的相互关系说明
<img src="./startup_0217.png" style="float:right;width:35%;margin-right:10px;" />
<img src="./startup_0216.png" style="float:right;width:20%;margin-right:10px;" /><br/>
条件1：文档"第3步"中名称、位置、解决方案名称三者的设置分别是 "helloworld"、"d:\"、"homework"<br/>
条件2：文档"第7步"新建的源文件为"helloworld.cpp"<br/><br/>
则：打开"d:\"文件夹，可以看到"homework"文件夹<br/>
&emsp;&emsp;打开"d:\homework"文件夹，可以看到"helloworld"和"Debug"文件夹<br/>
&emsp;&emsp;打开"d:\homework\helloworld"文件夹，可以看到"helloworld.cpp"<br/>
&emsp;&emsp;打开"d:\homework\Debug"文件夹，可以看到"helloworld.exe"<br/><br/>

![](startup_0218.png)


问：如何编写并调试一个程序<br/>
答：通过步骤1-13，可以完成一个程序的编写及调试<br/><br/>
问：如何编写并调试下一个程序<br/>
答：方法1 - 再次重复步骤1-13，可以继续完成下一个程序的编写及调试

&emsp;&emsp;**注：这种方法，每个解决方案仅包含一个项目，不方便，也不推荐!!!**

方法2 - 在已有的解决方案中建立一个新的项目，具体方法如下

## §.使用VS2022编写调试一个新程序的基本步骤 - 在一个已有解决方案中新建项目
### 第1步：启动VS2022，打开刚才的"homework"解决方案
方法1：打开"D:\homework"文件夹，双击"homework.sln"
![](startup_0219.png)
方法2：启动VS2022，"打开最近使用的内容" 选 "homework.sln"
![](startup_0220.png)
方法3："文件" - "最近使用的项目和解决方案" - 选择"homework.sln"
![](startup_0221.png)
方法4：选择"打开文件"按钮，在出现的对话框中，找到"d:\homework"目录，选择"homework.sln"，按"打开"
![](startup_0222.png)
方法5："文件" - "打开" - "项目/解决方案"，出现的对话框中找到"d:\homework"目录，选择"homework.sln"，按"打开"
![](startup_0223.png)

### 第2步：在解决方案"homework"上按鼠标右键，菜单中选"添加" - "新建项目"
**(注意：不是"helloworld"项目的右键菜单!!!)**
![](startup_0224.png)

### 第3步：出现的对话框中，选择"空项目"，按"下一步"，在出现的对话框中，输入项目名称，按"创建"后按"确定"
![](startup_0225.png)

### 第4步：在同一解决方案的多个项目间切换"启动项目"
#### 4-1：项目"myinfo"新建成功后，左侧解决方案资源管理器显示两个项目，其中粗体表示的为启动项目

**说明：如果一个解决方案中有多个项目，则有且仅有一个"启动项目"，**
<br/>
&emsp;&emsp;&emsp;**按 "调试" - "开始执行(不调试)" / CTRL+F5 执行程序时，*执行的是启动项目***
![](startup_0226.png)

#### 4-2：在"myinfo"项目上按鼠标右键，菜单选"设为启动项目" **(注意：鼠标必须放在要设置的项目上!!!)**
![](startup_0227.png)

#### 4-3：左侧的"myinfo"变为粗体，表示启动项目已切换为"myinfo"
![](startup_0228.png)

### 在myinfo项目中添加源程序并进行编辑、修改、编译、运行
**（下述第5\~13步，与helloworld项目的第5\~13步相同，截图及详细说明略）**<br/>
第5步：在项目"myinfo"的"源文件"上按鼠标右键，出现的菜单中选择"添加"-"新建项"<br/>
第6步：如果项目"helloworld"中已设置为"显示所有模版"，则直接进入第7步<br/>
第7步：出现的对话框中选择"C++文件"，在"名称"中输入C++源文件的名称 **(按作业要求命名)**，按"添加"<br/>
第8步：在新添加的源程序文件中输入你的代码<br/>
第9步：确认右下角两个设置是否"SYS-简体中文(GB2312)"和"CRLF"<br/>
第10步：输入完成后，"调试"-"开始执行(不调试)"  **(推荐直接按 CTRL+F5 组合键)**<br/>
第11步：如果程序正确，则会执行并显示运行结果<br/>
第12步：如果源程序有错误，则出现的对话框选择"否"，再根据编译时产生的错误提示信息修改源程序，再选择"调试"-"开始执行(不调试)"  **(第10步)**，反复多次直至程序正确运行为止<br/>
第13步：一个程序完成后，"文件"-"关闭解决方案"，或右上角 x 关闭<br/>

### 一个解决方案包含多个项目时，文件及文件夹的相互关系说明
条件1："homework"解决方案，目录为"d:\homework"<br/>
条件2："homework"解决方案中有"helloworld"和"myinfo"两个项目<br/>
条件3："helloworld"项目中建立的源文件为"helloworld.cpp"，"myinfo"项目中建立的源文件为"myinfo.cpp"<br/>
条件4："helloworld.cpp"和"myinfo.cpp"分别被编译成可执行文件"helloworld.exe"和"myinfo.exe"<br/>
![](startup_0229.png)